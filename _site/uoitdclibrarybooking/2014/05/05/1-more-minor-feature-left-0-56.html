<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>1 more minor feature left (0.56)</title>
  <meta name="description" content="Intro">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="objectivetruth.github.io/uoitdclibrarybooking/2014/05/05/1-more-minor-feature-left-0-56.html">
  <link rel="alternate" type="application/rss+xml" title="Nothing but the Objectivetruth" href="objectivetruth.github.io/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Nothing but the Objectivetruth</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">1 more minor feature left (0.56)</h1>
    <p class="post-meta">May 5, 2014</p>
  </header>

  <article class="post-content">
    <h2>Intro</h2>

<p>After heavy testing, I&#39;m quite certain you can&#39;t crash the program
unless you are actively playing with the code or doing something you
shouldn&#39;t be.. actually even then I don&#39;t think you could crash it. I
spent a huge amount of time getting GoogleAnalytics to work and man is
it ever cool.</p>

<p>The biggest problem I find with Comp Sci (also the most rewarding) is
that things move so fast that by the time you try to learn something,
there&#39;s a new version that nobody knows how to use as yet. That&#39;s the
issue with GoogleAnalytics. </p>

<p>SDK 4 was recently release (like a month or
so ago) and there&#39;s little info on it. Even on stackoverflow, all the
answers are, &quot;hey you&#39;ll find the answer on the developer link:&quot;</p>

<p><code>https://developers.google.com/analytics/devguides/collection/android/v4/</code></p>

<p>I&#39;d like to do a full post on how to use it but right now I&#39;m so focus
on publishing this app that its going on the back burner. I will say
though the biggest challenge I had with it was figuring out the
difference between the global<em>tracker and the app</em>tracker. Take a look
at this code below from the Google analytics site and I&#39;ll explain
what&#39;s going on.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">synchronized</span> <span class="n">Tracker</span> <span class="nf">getTracker</span><span class="o">(</span><span class="n">TrackerName</span> <span class="n">trackerId</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">mTrackers</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">trackerId</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">GoogleAnalytics</span> <span class="n">analytics</span> <span class="o">=</span> <span class="n">GoogleAnalytics</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
      <span class="n">Tracker</span> <span class="n">t</span> <span class="o">=</span> <span class="o">(</span><span class="n">trackerId</span> <span class="o">==</span> <span class="n">TrackerName</span><span class="o">.</span><span class="na">APP_TRACKER</span><span class="o">)</span> <span class="o">?</span> <span class="n">analytics</span><span class="o">.</span><span class="na">newTracker</span><span class="o">(</span><span class="n">PROPERTY_ID</span><span class="o">)</span>
          <span class="o">:</span> <span class="o">(</span><span class="n">trackerId</span> <span class="o">==</span> <span class="n">TrackerName</span><span class="o">.</span><span class="na">GLOBAL_TRACKER</span><span class="o">)</span> <span class="o">?</span> <span class="n">analytics</span><span class="o">.</span><span class="na">newTracker</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">global_tracker</span><span class="o">)</span>
              <span class="o">:</span> <span class="n">analytics</span><span class="o">.</span><span class="na">newTracker</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">ecommerce_tracker</span><span class="o">);</span>
      <span class="n">mTrackers</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">trackerId</span><span class="o">,</span> <span class="n">t</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">mTrackers</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">trackerId</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></div>
<p>Okay, so synchronized is a method type which basically says, make this thread safe by only letting 1 thread access it at a time. If another thread tries to access it, make it wait. Essentially its like instant singleton in a way.Â  The ? and : is syntactic sugar that turns</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span><span class="o">((</span><span class="n">min</span> <span class="o">&gt;=</span><span class="mi">2</span><span class="o">){</span>
   <span class="n">someval</span> <span class="o">=</span><span class="mi">2</span><span class="o">;}</span><span class="k">else</span><span class="o">{</span>
   <span class="n">someval</span> <span class="o">=</span><span class="mi">1</span><span class="o">}</span>
</code></pre></div>
<p>into</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">someval</span> <span class="o">=</span> <span class="o">(</span><span class="n">min</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="o">)</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">1</span><span class="o">;</span>
</code></pre></div>
<p>in parenthesis is the conditional statement where after the ? on the left is if true, and on the right is if false. Very neat and very easy to read. Okay so back to the above code.</p>

<p>GoogleAnalytics analytics = GoogleAnalytics.getInstance(this) is the most important part of the code. It is placed in an application class because this way EVERY activity will have it available since all activities extend from Application. The new Tracker for App<em>tracker is good because it allows you to monitor start and end states but global</em>tracker doesn&#39;t really do anything as far as I can tell. I just use the app tracker and analytics and I get all my data in real time.</p>

<p>My code looks like this</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UOITLibraryBookingApp</span> <span class="kd">extends</span> <span class="n">Application</span> <span class="o">{</span>
    <span class="c1">//initialized the tracker to null so I can check when the app is made</span>
    <span class="n">Tracker</span> <span class="n">t</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="c1">//Logging TAG</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">TAG</span> <span class="o">=</span> <span class="s">&quot;UOITLibraryBookingApp&quot;</span><span class="o">;</span>
 <span class="kd">public</span> <span class="nf">UOITLibraryBookingApp</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">();</span>
    <span class="o">}</span>
 <span class="kd">public</span> <span class="n">Tracker</span> <span class="nf">getTracker</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">t</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="n">GoogleAnalytics</span> <span class="n">analytics</span> <span class="o">=</span> <span class="n">GoogleAnalytics</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">analytics</span><span class="o">.</span><span class="na">newTracker</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">app_tracker</span><span class="o">);</span>
        <span class="o">}</span>
 <span class="k">return</span> <span class="n">t</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>This way I call get Tracker in my MainActivity&#39;s onCreate() to instantiate the GoogleAnalytics part. Then I can use it to build things such as:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java">    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onStart</span><span class="o">();</span>
        <span class="n">GoogleAnalytics</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">reportActivityStart</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onStop</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onStop</span><span class="o">();</span>
        <span class="n">GoogleAnalytics</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">reportActivityStop</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div>
<p>This way you call <code>GoogleAnalytics.getInstance(this)</code> and use the dot to see all the different things you can change (at least in eclipse it gives you all the methods you can use).</p>

<h2>ShowCaseView GC_OverHeadLimiteExceeded BUG</h2>

<p>I talked about this 2 posts ago and finally got around to implementing the tutorial like Google does. The Library this guy made is INCREDIBLY awesome but has a few known issues that you have to wrestle with. Also the documentation isn&#39;t great but the javadocs are very handy in Eclipse to help guide you when it can. Here is the link again to the GitHub repository.</p>

<p>https://github.com/amlcurran/ShowcaseView</a></h3></p>

<p>He&#39;s made a new version that literally came out a few days ago but there&#39;s little documentation and only available on Maven and Gradle. I&#39;ve never used either of those and I&#39;m using eclipse instead of Android Studio so instead of learning 2 new tools, I decided to use the still completely functional legacy version. (the only real difference is code clean up and Maven/Gradle support).</p>

<p>One COMMON issue with eclipse and using this library is a GC_OverHeadLimitreached Exception you get when you try to compile. Here&#39;s the link with info on it but essentially you gotta delete the Roboelectric</strong> dependency libraries. Doesn&#39;t even do anything? why is it there?</p>

<p>https://github.com/amlcurran/ShowcaseView/issues/108</p>

<p>This will solve it and here is an AWESOME tutorial on how to use it. Saves a ton of time and I would love to make a new updated version of it, but it gets you started.</p>

<p>http://forum.xda-developers.com/showthread.php?t=2419939</p>

<h2>Patch Notes 0.56</h2>

<ul>
<li><p>Google Analytics suppot added. Can see how many times its installed now! Very cool.</p></li>
<li><p>Tutorial Overlay DONE. Just 3 screens so I don&#39;t overwhelm people</p></li>
<li><p>Pretty sure no more crashes from adding/losing a day. Will try it all week make sure it works okay.</p></li>
</ul>

<h2>Finalized TODO list (last thing!)</h2>

<ul>
<li>Implementing joining a completed Booking(why would anyone want to do this? still should add it for completeness)</li>
</ul>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Nothing but the Objectivetruth</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Nothing but the Objectivetruth</li>
          <li><a href="mailto:miguel@objectivetruth.ca">miguel@objectivetruth.ca</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/Objectivetruth">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">Objectivetruth</span>
            </a>
          </li>
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Musing from a mature student with a background in Sales, Biosciences and now Computer Science. Trying to save the world one app at a time.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
