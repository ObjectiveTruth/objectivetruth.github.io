---
layout: post
status: publish
published: true
title: Almost there! (0.55)
categories:
- UOITDCLibraryBooking
tags:
- Android
- HTML
- TextView
- gravity
- '0.55'
- .apk
- uoitlibrarybooking
- aboutme
---
##Intro

More bug fixes as usual. Now with the spiffy new calendar view, I had
to deal with all the previous bug cases. Things like odd time changes,
and days where there are no bookings available.

Also! The school threw me a wrench by adding a day where half the rooms
were unavailable for booking! wtf?? I did have one Constant number that
everything else was based on which was the number of rooms. I figure
this wouldn't change anytime soon, but I was wrong. The major problem is
that I used this number to create data structures to hold everything.
The only way I could figure out how to find this was half way down my
algorithm. 

Welp... time to refactor some algorithms.. ugh.. In the end I
did some extra optimization since I was in the sensitive part of the
code. Its good though because if this had happened a month from now that
would of really been a pain to release an update to deal with it!

I'm trying to get the last of this done by end of week and its totally
feasible AFAI can tell. In the patch notes I put some of the final
things I want to do. Also included a compiled .apk for everyone's
perusal who's actually reading this, hah!

##Adding HTML tags to TextView

Certain HTML tags are allowed and this guy has a great list of them

http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html

You can use this in your String.xml file like so:

```xml
    Hey, thanks for checking out this page.\n\n
    I\'m a UOIT Comp Sci student and this is my first android app.
    As its my first app there might be some bugs but I hope you find it actually useful since the old booking system is so archaic.\n\n If you\'re interested you can check
    out my blog at www.ObjectiveTruth.ca and read up on the adventures of getting this thing off the ground. If you have any comments or suggestions feel free to comment there.\n
    or don\'t.. who am I your mom?
  </p>
</string>
```

And in your actual TextView description you can add it like so:

```xml
android:id="@+id/textView2"
android:layout_width="match_parent"
android:layout_height="0dp"
android:layout_marginLeft="15dp"
android:layout_marginRight="15dp"
android:layout_weight="1"
android:text="@string/about_me_monologue"
android:gravity="center"
android:autoLink="web"
android:textAppearance="?android:attr/textAppearanceMedium" />
```
 
android:autoLink="web" tells the system to parse for weblinks in the usual patter(www.*.*) and make them clickable. The great thing is that it fires off the intent filter automatically. So it will launch the web browser that the user has defaulted to. You can also add other autoLink parameters link email or both like so: "web|email". Very cool stuff.

##Gravity vs. Layout_Gravity

There's a difference. Layout gravity is with respect to the parent layout and gravity is internal. So lets say you have a text view that spans the whole width, If you use gravity it will place the text right in the middle of the entire TextView. Gravity can be considered internal gravity whereas layout gravity is external with respect to the parent.

This was a huge aggravation for me before because I couldn't get things centered. Hopefully it helps someone out there.
 
##Patch Notes 0.55

* Fixed bug where the number of rooms != 11 (this week the 2nd floor rooms are unavailable, good thing it changed so I could deal with the bug

* Fixed a bug where the leave/join group spinners weren't populating properly with more than 1 entry.

* About page is finalized with a nice background

* background added to Policies/guidelines activity

* Added The ability to create a competition booking. One of the hardest features yet!

##Finalized TODO list

* Implementing joining a completed Booking(why would anyone want to do this? still should add it for completeness)

* Ensure adding/losing a day won't crash it. (with the spiffy calendar gotta make sure this is solid)

* Tutorial Overlay
